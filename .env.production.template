# POLYMORPH-LITE Production Environment Configuration Template
#
# ⚠️  IMPORTANT: This is a template file. DO NOT commit with real secrets!
# Copy to .env.production and replace all ${VARIABLE} placeholders with actual values.

# Environment
ENVIRONMENT=production

# Database (PostgreSQL - REQUIRED for production)
DATABASE_URL=postgresql://polymorph:${DB_PASSWORD}@postgres:5432/polymorph_prod
DATABASE_POOL_SIZE=50
DATABASE_MAX_OVERFLOW=10

# Redis (REQUIRED for session management)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}

# Security (CRITICAL - Generate unique secrets!)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=${SECRET_KEY}
JWT_SECRET_KEY=${JWT_SECRET_KEY}
JWT_EXPIRATION_MINUTES=30

# RSA Keys for E-Signatures (21 CFR Part 11 Compliance)
# Generate with: openssl genrsa -out private.pem 2048 && openssl rsa -in private.pem -pubout -out public.pem
RSA_PRIVATE_KEY_PATH=/app/secrets/private.pem
RSA_PUBLIC_KEY_PATH=/app/secrets/public.pem

# AI Service
AI_SERVICE_URL=http://ai-service:3000
AI_CIRCUIT_BREAKER_THRESHOLD=5
AI_CIRCUIT_BREAKER_TIMEOUT=120

# Data Directories
P4_DATA_DIR=/app/data
P4_CONFIG=/app/config/config.yaml

# Logging
LOG_LEVEL=WARNING
LOG_FORMAT=json
SENTRY_DSN=${SENTRY_DSN}
ENABLE_LOG_ROTATION=true
LOG_RETENTION_DAYS=90

# Server
HOST=0.0.0.0
PORT=8001

# CORS (Restrict to your actual domains!)
ALLOWED_ORIGINS=https://polymorph.yourdomain.com,https://app.yourdomain.com

# Feature Flags
ENABLE_MFA=true
ENABLE_APPROVAL_WORKFLOW=true
ENABLE_AI_INFERENCE=true
ENABLE_RATE_LIMITING=true

# Performance
DATABASE_POOL_SIZE=50
MAX_CONCURRENT_WORKFLOWS=100
REQUEST_TIMEOUT_SECONDS=300

# Observability
ENABLE_PROMETHEUS_METRICS=true
PROMETHEUS_PORT=9090
ENABLE_OPENTELEMETRY=true
OTEL_EXPORTER_OTLP_ENDPOINT=${OTEL_ENDPOINT}

# Compliance (21 CFR Part 11)
ENABLE_AUDIT_CHAIN_VERIFICATION=true
ENABLE_CONFIG_VERSIONING=true
PASSWORD_COMPLEXITY_ENABLED=true
PASSWORD_EXPIRY_DAYS=90
PASSWORD_HISTORY_COUNT=5
MAX_FAILED_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION_MINUTES=30
SESSION_TIMEOUT_MINUTES=30
MAX_CONCURRENT_SESSIONS=3

# Backup
ENABLE_AUTO_BACKUP=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# Multi-Site (Phase 4 - Optional)
# CLOUD_CONTROLLER_URL=wss://cloud.polymorph.example.com/ws/node
# NODE_ID=${NODE_ID}
# ORGANIZATION_ID=${ORGANIZATION_ID}
# LAB_ID=${LAB_ID}

# Email Notifications (Optional)
# SMTP_HOST=${SMTP_HOST}
# SMTP_PORT=587
# SMTP_USERNAME=${SMTP_USERNAME}
# SMTP_PASSWORD=${SMTP_PASSWORD}
# SMTP_FROM_EMAIL=noreply@yourdomain.com

# SSO Integration (Phase 4 - Optional)
# SSO_ENABLED=false
# AZURE_CLIENT_ID=${AZURE_CLIENT_ID}
# AZURE_CLIENT_SECRET=${AZURE_CLIENT_SECRET}
# AZURE_TENANT_ID=${AZURE_TENANT_ID}
